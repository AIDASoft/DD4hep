sudo: required

services:
  - docker

# command to install dependencies
install:
  - shopt -s extglob dotglob
  - mkdir DD4hep
  - mv !(DD4hep) DD4hep
  - shopt -u dotglob
  - export DD4hepDIR=${PWD}/DD4hep
  - ls $DD4hepDIR
  - curl -O http://cernvm.cern.ch/releases/production/cvm-docker-3.6.5.1.tar
  - cat cvm-docker-3.6.5.1.tar | docker import - cernvm

# command to run tests
script:
  - docker run -d -i -t -v $DD4hepDIR:/DD4hep cernvm /init
  - export CONTAINER=`docker ps -q`
  - docker exec $CONTAINER /bin/bash -c "ls /DD4hep"